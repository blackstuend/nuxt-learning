(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{332:function(e,t,r){"use strict";r.r(t);r(19),r(32),r(62);var n=r(23),c={data:function(){return{device_name:"",error:!1}},computed:{Device:function(){return this.$store.state.bluetooth.Device}},methods:{add:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,c,o,v,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c={},(r=[]).push({services:["battery_service"]}),""!=e.device_name){t.next=8;break}return e.error=!0,t.abrupt("return");case 8:e.error=!1,r.push({name:e.device_name}),c.filters=r;case 11:return t.prev=11,t.next=14,navigator.bluetooth.requestDevice(c);case 14:return o=t.sent,e.$store.commit("bluetooth/GetDevice",{name:o.name,id:o.id}),t.next=18,o.gatt.connect();case 18:return v=t.sent,t.next=21,v.getPrimaryService("battery_service");case 21:return l=t.sent,t.next=24,l.getCharacteristic("battery_level");case 24:d=t.sent,setInterval(Object(n.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.readValue();case 2:t=e.sent,this.$store.commit("bluetooth/UpdateBattery",t.getUint8(0));case 4:case"end":return e.stop()}}),e,this)}))),1e3),t.next=31;break;case 28:t.prev=28,t.t0=t.catch(11),console.log(t.t0);case 31:case"end":return t.stop()}}),t,null,[[11,28]])})))()}}},o=r(46),component=Object(o.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("div",{staticClass:"row justify-content-center"},[r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"h3 text-center"},[e._v("請輸入Device Name")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.device_name,expression:"device_name"}],staticClass:"form-control text-center",attrs:{type:"text"},domProps:{value:e.device_name},on:{input:function(t){t.target.composing||(e.device_name=t.target.value)}}}),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticClass:"alert alert-danger mt-2 text-center",attrs:{role:"alert"}},[r("strong",[e._v("請輸入Device Name")])]),e._v(" "),r("button",{staticClass:"btn btn-primary mt-3 w-100",on:{click:e.add}},[e._v("加入")])])]),e._v(" "),r("div",{staticClass:"row mt-2 justify-content-center"},[r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"card",staticStyle:{width:"18rem"}},[r("div",{staticClass:"card-body"},[r("p",{staticClass:"card-text"},[e._v("裝置名稱:"+e._s(e.Device.name))]),e._v(" "),r("p",{staticClass:"card-text"},[e._v("裝置ID:"+e._s(e.Device.id))]),e._v(" "),r("p",{staticClass:"card-text"},[e._v("目前電量:"+e._s(e.Device.battery)+"%")])])])])])])}),[],!1,null,null,null);t.default=component.exports}}]);